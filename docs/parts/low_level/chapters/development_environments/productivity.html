

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>3. Popular productivity tools &mdash; Mastering Python</title>
  

  
  
    <link rel="shortcut icon" href="../../../../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script src="../../../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/styles.css" type="text/css" />
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../index.html" class="icon icon-home"> Mastering Python
          

          
            
            <img src="../../../../_static/logo-white.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                16/03/2020
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../craftmanship/index.html">Craftmanship</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../structures_algorithms/index.html">Data structures and algorithms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../quality/index.html">Code quality</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../optimization/index.html">Code optimization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../technical_architecture/index.html">Technical architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Low level Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../distribution/index.html">Code distribution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../references/index.html">References</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Mastering Python</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html">Docs</a> &raquo;</li>
        
      <li>3. Popular productivity tools</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../../_sources/parts/low_level/chapters/development_environments/productivity.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="popular-productivity-tools">
<h1>3. Popular productivity tools<a class="headerlink" href="#popular-productivity-tools" title="Permalink to this headline">¶</a></h1>
<p>Productivity tool is bit of a vague term. On one hand, almost every open source code
package that has been released and is available online is a kind of productivity booster: it
provides ready-to-use solutions to some problem, so that no one needs to spend time on it
(ideally speaking). On the other hand, you could say that the whole of Python is about
productivity, and both are undoubtedly true. Almost everything in this language and
community surrounding it seems to be designed in order to make software development as
productive as possible.</p>
<p>This creates a positive feedback loop. Since writing code is fun and easy, a lot of
programmers use their free time to create tools that make it even easier and fun. And this
fact will be used here as a basis for a very subjective and non-scientific definition of a
productivity tool: a piece of software that makes development easier and more fun.</p>
<p>By nature, productivity tools focus mainly on certain elements of the development process,
such as testing, debugging, and managing packages, and are not core parts of products that
they help to build. In some cases, they may not even be referred to anywhere in the project’s
codebase, despite being used on a daily basis.</p>
<p>The most important productivity tools, <code class="docutils literal notranslate"><span class="pre">pip</span></code> and <code class="docutils literal notranslate"><span class="pre">venv</span></code>, were already discussed earlier.
Some of them have packages for specific problems, such as profiling and testing,
which have their own chapters in this book. This section is dedicated to other tools that are
really worth mentioning, but have no specific chapter in this book where they could be
introduced.</p>
<div class="section" id="custom-python-shells">
<h2>3.1. Custom Python shells<a class="headerlink" href="#custom-python-shells" title="Permalink to this headline">¶</a></h2>
<p>Python programmers spend a lot of time in interactive interpreter sessions. It is very good
for testing small code snippets, accessing documentation, or even debugging code at
runtime. The default interactive Python session is very simple, and does not provide many
features, such as tab completion or code introspection helpers. Fortunately, the default
Python shell can be easily extended and customized.</p>
<p>If you use an interactive shell very often, you can easily modify the behavior of it prompt.
Python at startup reads the <code class="docutils literal notranslate"><span class="pre">PYTHONSTARTUP</span></code> environment variable, looking for the path of
the custom initializations script. Some operating system distributions where Python is a
common system component (for example, Linux, macOS) may be already preconfigured to
provide a default startup script. It is commonly found in the users, home directory under
the <code class="docutils literal notranslate"><span class="pre">.pythonstartup</span></code> name. These scripts often use the <code class="docutils literal notranslate"><span class="pre">readline</span></code> module (based on the
GNU readline library) together with <code class="docutils literal notranslate"><span class="pre">rlcompleter</span></code> in order to provide interactive tab
completion and command history.</p>
<p>If you don’t have a default python startup script, you can easily build your own. A basic
script for command history and tab completion can be as simple as the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">atexit</span>
<span class="kn">import</span> <span class="nn">os</span>


<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">readline</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Completion unavailable: readline module not available&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
     <span class="kn">import</span> <span class="nn">rlcompleter</span>
     <span class="c1"># tab completion</span>
     <span class="n">readline</span><span class="o">.</span><span class="n">parse_and_bind</span><span class="p">(</span><span class="s1">&#39;tab: complete&#39;</span><span class="p">)</span>
     <span class="c1"># Path to history file in user&#39;s home directory.</span>
     <span class="c1"># Can use your own path.</span>
     <span class="n">history_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;HOME&#39;</span><span class="p">],</span> <span class="s1">&#39;.python_shell_history&#39;</span><span class="p">)</span>
     <span class="k">try</span><span class="p">:</span>
        <span class="n">readline</span><span class="o">.</span><span class="n">read_history_file</span><span class="p">(</span><span class="n">history_file</span><span class="p">)</span>
     <span class="k">except</span> <span class="ne">IOError</span><span class="p">:</span>
        <span class="k">pass</span>

     <span class="n">atexit</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">readline</span><span class="o">.</span><span class="n">write_history_file</span><span class="p">,</span> <span class="n">history_file</span><span class="p">)</span>
     <span class="k">del</span> <span class="n">os</span><span class="p">,</span> <span class="n">history_file</span><span class="p">,</span> <span class="n">readline</span><span class="p">,</span> <span class="n">rlcompleter</span>
</pre></div>
</div>
<p>Create this file in your home directory and call it <code class="docutils literal notranslate"><span class="pre">.pythonstartup</span></code>. Then, add
a <code class="docutils literal notranslate"><span class="pre">PYTHONSTARTUP</span></code> variable in your environment using the path of your file.</p>
<div class="section" id="setting-up-the-pythonstartup-environment-variable">
<h3>3.1.1. Setting up the PYTHONSTARTUP environment variable<a class="headerlink" href="#setting-up-the-pythonstartup-environment-variable" title="Permalink to this headline">¶</a></h3>
<p>If you are running Linux or macOS, the simplest way is to create the startup script in your
home folder. Then, link it with a <code class="docutils literal notranslate"><span class="pre">PYTHONSTARTUP</span></code> environment variable that’s been set in
the system shell startup script. For example, Bash and Korn shell use the <code class="docutils literal notranslate"><span class="pre">.profile</span></code> file,
where you can insert a line, as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">PYTHONSTARTUP</span><span class="o">=</span>~/.pythonstartup
</pre></div>
</div>
<p>If you are running Windows, it is easy to set a new environment variable as an
administrator in the system preferences, and save the script in a common place instead of
using a specific user location.</p>
<p>Writing on the PYTHONSTARTUP script may be a good exercise, but creating a good custom
shell all alone is a challenge that only a few can find time for. Fortunately, there are a few
custom Python shell implementations that immensely improve the experience of interactive
sessions in Python.</p>
</div>
<div class="section" id="ipython">
<h3>3.1.2. IPython<a class="headerlink" href="#ipython" title="Permalink to this headline">¶</a></h3>
<p>IPython
(<a class="reference external" href="https://ipython.readthedocs.io/en/stable/overview.html">https://ipython.readthedocs.io/en/stable/overview.html</a>)
provides an extended Python command shell. Among the features that it provides, the most interesting
ones are as follows:</p>
<ul class="simple">
<li><p>Dynamic object introspection</p></li>
<li><p>System shell access from the prompt</p></li>
<li><p>Profiling direct support</p></li>
<li><p>Debugging facilities</p></li>
</ul>
<p>Now, IPython is a part of the larger project called Jupyter, which provides interactive
notebooks with live code that can be written in many different languages.</p>
</div>
<div class="section" id="bpython">
<h3>3.1.3. bpython<a class="headerlink" href="#bpython" title="Permalink to this headline">¶</a></h3>
<p>bpython (<a class="reference external" href="https://bpython-interpreter.org/">https://bpython-interpreter.org/</a>) advertises itself as a fancy interface
to the Python interpreter. Here are some of the accented features on the projects page:</p>
<ul class="simple">
<li><p>In-line syntax highlighting</p></li>
<li><p>Readline-like autocomplete with suggestions displayed as you type</p></li>
<li><p>Expected parameter list for any Python function</p></li>
<li><p>Auto-indentation</p></li>
<li><p>Python 3 support</p></li>
</ul>
</div>
<div class="section" id="ptpython">
<h3>3.1.4. ptpython<a class="headerlink" href="#ptpython" title="Permalink to this headline">¶</a></h3>
<p>ptpython (<a class="reference external" href="https://github.com/jonathanslenders/ptpython/">https://github.com/jonathanslenders/ptpython/</a>) is another
approach to the topic of advanced Python shells. What is interesting about this project is that core prompt
utilities implementation is available as a separate package, called <code class="docutils literal notranslate"><span class="pre">prompt_toolkit</span></code> (from
the same author). This allows us to easily create various aesthetically pleasing interactive
command-line interfaces.</p>
<p>It is often compared to bpython in functionalities, but the main difference is that it enables
compatibility mode with IPython and its syntax enables additional features, such
as %pdb, %cpaste, or %profile.</p>
</div>
</div>
<div class="section" id="incorporating-shells-in-your-own-scripts-and-programs">
<h2>3.2. Incorporating shells in your own scripts and programs<a class="headerlink" href="#incorporating-shells-in-your-own-scripts-and-programs" title="Permalink to this headline">¶</a></h2>
<p>Sometimes, there is a need to incorporate a read-eval-print loop (REPL), similar to Python’s
interactive session, inside of your own software. This allows for easier experimentation
with your code and inspection of its internal state. The simplest module that allows for
emulating Python’s interactive interpreter already comes with the standard library and is
named code.</p>
<p>The script that starts interactive sessions consists of one import and single function call:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">code</span>
<span class="n">code</span><span class="o">.</span><span class="n">interact</span><span class="p">()</span>
</pre></div>
</div>
<p>You can easily do some minor tuning, such as modify a prompt value or add banner and
exit messages, but anything more fancy will require a lot more work. If you want to have
more features, such as code highlighting, completion, or direct access to the system shell, it
is always better to use something that was already built by someone. Fortunately, all of the
interactive shells that were mentioned in the previous section can be embedded in your
own program as easily as the code module.</p>
<p>The following are examples of how to invoke all of the previously mentioned shells inside
of your code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">IPython</span>
<span class="n">IPython</span><span class="o">.</span><span class="n">embed</span><span class="p">()</span>

<span class="kn">import</span> <span class="nn">bpython</span>
<span class="n">bpython</span><span class="o">.</span><span class="n">embed</span><span class="p">()</span>

<span class="kn">from</span> <span class="nn">ptpython.repl</span> <span class="kn">import</span> <span class="n">embed</span>
<span class="n">embed</span><span class="p">(</span><span class="nb">globals</span><span class="p">(),</span> <span class="nb">locals</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="section" id="interactive-debuggers">
<h2>3.3. Interactive debuggers<a class="headerlink" href="#interactive-debuggers" title="Permalink to this headline">¶</a></h2>
<p>Code debugging is an integral element of the software development process. Many
programmers can spend most of their life using only extensive logging
and print statements as their primary debugging tools, but most professional developers
prefer to rely on some kind of debugger.</p>
<p>Python already ships with a built-in interactive debugger called <code class="docutils literal notranslate"><span class="pre">pdb</span></code> (refer
to <a class="reference external" href="https://docs.python.org/3/library/pdb.html">https://docs.python.org/3/library/pdb.html</a>). It can be invoked from
the command line on the existing script, so Python will enter post-mortem debugging if the program exits
abnormally:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">pdb</span> <span class="n">script</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>Post-mortem debugging, while useful, does not cover every scenario. It is useful only when
the application exits with some exception if the bug occurs. In many cases, faulty code just
behaves abnormally, but does not exit unexpectedly. In such cases, custom breakpoints can
be set on a specific line of code using this single-line idiom:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pdb</span>
<span class="n">pdb</span><span class="o">.</span><span class="n">set_trace</span><span class="p">()</span>
</pre></div>
</div>
<p>This will cause the Python interpreter to start the debugger session on this line during
runtime.</p>
<p><code class="docutils literal notranslate"><span class="pre">pdb</span></code> is very useful for tracing issues, and at first glance it may look very familiar to the wellknown
GNU Debugger (GDB). Because Python is a dynamic language, the <code class="docutils literal notranslate"><span class="pre">pdb</span></code> session is
very similar to an ordinary interpreter session. This means that the developer is not limited
to tracing code execution, but can call any code and even perform module imports.</p>
<p>Sadly, because of its roots (<code class="docutils literal notranslate"><span class="pre">bdb</span></code>), your first experience with <code class="docutils literal notranslate"><span class="pre">pdb</span></code> can be a bit overwhelming
due to the existence of cryptic short-letter debugger commands such as <code class="docutils literal notranslate"><span class="pre">h</span></code>, <code class="docutils literal notranslate"><span class="pre">b</span></code>, <code class="docutils literal notranslate"><span class="pre">s</span></code>, <code class="docutils literal notranslate"><span class="pre">n</span></code>, <code class="docutils literal notranslate"><span class="pre">j</span></code>, and <code class="docutils literal notranslate"><span class="pre">r</span></code>.
When in doubt, the <code class="docutils literal notranslate"><span class="pre">help</span> <span class="pre">pdb</span></code> command which can be typed during the debugger session,
will provide extensive usage and additional information.</p>
<p>The debugger session in <code class="docutils literal notranslate"><span class="pre">pdb</span></code> is also very simple and does not provide additional features
such as tab completion or code highlighting. Fortunately, there are a few packages available
on PyPI that provide such features from alternative Python shells, as mentioned in the
previous section. The most notable examples are as follows:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ipdb</span></code>: This is a separate package based on ipython</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ptpdb</span></code>: This is a separate package based on ptpython</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bpdb</span></code>: This is bundled with bpython</p></li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Sergio Bugallo

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>